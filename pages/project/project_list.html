<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="../../static/img/favicon.ico">
    <title>项目列表</title>
    <link href="../../static/libs/inspinia/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../static/libs/inspinia/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="../../static/libs/inspinia/css/animate.css" rel="stylesheet">
    <link href="../../static/libs/inspinia/css/style.css" rel="stylesheet">
    <link href="../../static/css/main.css" rel="stylesheet">
    <script src="../../static/libs/inspinia/js/respond.src.js"></script>
</head>
<body>
<div id="wrapper">
    <div class="gray-bg">
        <div id="header"></div>
        <div class="row wrapper border-bottom white-bg title-row">
            <div class="col-sm-4">
                <h2 class="pro-list-h3">项目列表</h2>
            </div>
            <div class="col-sm-8">
                <div class="title-action">
                    <a href="add-project.html" class="btn btn-primary create-product">创建项目</a>
                </div>
            </div>
        </div>
        <div class="wrapper wrapper-content animated fadeInRight">
            <div class="row">
                <div class="col-lg-12">
                    <div class="ibox float-e-margins">
                        <div class="ibox-content">
                            <div class="row">
                                <div class="col-lg-12">
                                    
                                    <table class="table  table-bordered table-hover product-list-table" id="editable" >
                                        <thead>
                                        <tr>
                                            <th>项目名称</th>
                                            <th>创建时间</th>
                                            <th>状态</th>
                                            <th>操作</th>
                                        </tr>
                                        </thead>
                                        <tbody id="show_list_id">
                                        </tbody>
                                    </table>
                                    <div class="empty hidden">
                                        <div class="iconfont icon-no-product-information empty-icon"></div>
                                        <p class="empty-text">无商品信息，<a href="/pages/product/create-product.html" class="create-link">创建商品</a></p>
                                    </div>
                                    <div>
                                        <div class="page-bar pull-left">
                                            共<span id="total">10</span>条记录，每页显示
                                            <select class="m-b form-control-sel" id="page_size" name="page_size">
                                                <option value="5">5</option>
                                                <option value="10">10</option>
                                                <option value="15">15</option>
                                                <option value="20">20</option>
                                            </select>条
                                        </div>
                                        <div class="btn-group pull-right page-bar">
                                            <div id="paginator_footer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Mainly scripts -->
<script src="../../static/libs/jquery/jquery.min.js"></script>
<script src="../../static/libs/inspinia/js/bootstrap.min.js"></script>
<script src="../../static/js/main.js"></script>
<script src="../../static/libs/inspinia/js/plugins/jeditable/jquery.jeditable.js"></script>

<script src="../../static/libs/inspinia/js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="../../static/libs/inspinia/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

<!-- Custom and plugin javascript -->
<script src="../../static/libs/inspinia/js/inspinia.js"></script>
<script src="../../static/libs/inspinia/js/plugins/pace/pace.min.js"></script>
<script src="../../static/js/main.js"></script>
<script src="../../static/js/main-form.js"></script>
<!--<script src="../../static/js/template-bundle.js"></script>-->
<!--<script src="../../static/js/paginator.js"></script>-->
<!--<script src="../../static/js/tips-bomb.js"></script>-->
<script type="text/javascript">
    function deal_pruduct_list(data){
        switch (data.code){
            case ERRORCODE.SUCCESS:
                $("#show_list_id").empty();
                $(".product-list-table").siblings(".empty").addClass("hidden");
                $("#total").text(data.total);
                if(data["products"].length > 0){
                    var html = template('product/product-list', data);
                    $("#show_list_id").html(html);
                }else{
                    $(".empty.hidden").removeClass("hidden");
                }
                break;
            default:
                //异常判断
                noticeMsg(data.msg_cn);
        }
    }

    $(function(){
        var page_size = $("#page_size").val();
        $('#show_list_id').paginator({
            url: PRODUCT_HOST + "/api/code/product/product-list/",
            page_size: page_size,
            ajax_finish_func: deal_pruduct_list
        });
        $("select[name=status]").change(function(){
            $("#show_list_id").paginator("change_data", [{"status": $("select[name=status]").val()}]);
        });
    })
</script>
</body>
</html>