<!DOCTYPE html><html lang="en"><head>    <meta charset="utf-8">    <link rel="shortcut icon" href="../../static/img/favicon.ico">    <title>添加接口</title>    <link href="../../static/libs/inspinia/css/bootstrap.min.css" rel="stylesheet">    <link href="../../static/libs/inspinia/font-awesome/css/font-awesome.css" rel="stylesheet">    <link href="../../static/libs/inspinia/css/animate.css" rel="stylesheet">    <link href="../../static/libs/inspinia/css/style.css" rel="stylesheet">    <link href="../../static/css/main.css" rel="stylesheet">    <script src="../../static/libs/inspinia/js/respond.src.js"></script></head><body><div id="wrapper">    <div class="gray-bg">      <div id="header"></div>        <div class="row wrapper border-bottom white-bg title-row">          <div class="col-sm-16">            <h2 class="pro-list-h3">增加接口</h2>          </div>        </div>        <div class="wrapper wrapper-content animated fadeInRight">          <div class="row">            <div class="col-lg-12">              <div class="ibox float-e-margins">                <div class="ibox-content">                  <ul class="phone-ul clearfix">                    <li class="col-lg-6">                      <form class="error-tips-bottom create-product" id="create-form" method="POST">                        <ul class="create-ul create-w">                        <li>                          <div class="product-brands-box">                            <p class='input-title create-ul-h5'>项目<span class='red-color'>*</span></p>                            <div class="brands-box" id="form-control-create"><select class='form-control-create' name='brand_id' onchange='brandChange()'><option value=''>请选择所属项目</option></select></div>                            <a href="add-project.html" class="new-brands">添加新项目</a>                          </div>                        </li>                        <li>                         	<div class="search-bar">                         		请选择接口请求方法                        <select class="form-control-sel m-b" name="status">                          <option value="">GET</option>                          <option value="1">POST</option>                          <option value="2">PUT</option>                          <option value="10">DELETE</option>                          <option value="11">HEAD</option>                          <option value="20">CONNECT</option>                          <option value="30">OPTIONS</option>                          <option value="40">TRACE</option>                        </select>                      </div>                         </li>                        <li>                          <p class="input-title create-ul-h5">接口名称<span class="red-color">*</span></p>                          <input type="text" placeholder="请输入接口名称" class="form-control input-lg create-inp create-inp-num" maxlength="30" id="product-name" name="name"/>                        </li>                        <li>                          <p class="input-title create-ul-h5">URL<span class="red-color">*</span></p>                          <input type="text" placeholder="请输入接口的URL" class="form-control input-lg create-inp create-inp-num" maxlength="13" id="product-bar" name="bar_code"/>                          <div class="prompt-box hidden"></div>                        </li>                        <li>                          <p class="input-title create-ul-h5">路径<span class="red-color">*</span></p>                          <input type="text" placeholder="请输入接口路径" class="form-control input-lg create-inp" id="product-place" name="address"/>                        </li>                        <li>                          <p class="input-title create-ul-h5">接口参数<span class="red-color">*</span></p>                            <div class="">                                <span>key</span>                                <input type="text" class="form-control newadd" name="more_title" maxlength="10" placeholder="添加key值" />                                <span class="input-group-btn">                                   <button type="button" class="btn btn-outline btn-danger newadd-remove">删除</button>                                </span>                            </div>                            <span>value</span>                            <input type="text" placeholder="请输入value值" name="more_con" class="form-control input-lg newadd-con" />                        <li>                          <!--结束-->                        </li>                        <button type="button" class="btn btn-block btn-outline btn-success newadd-button">＋继续添加更多参数</button>                        <button type="submit" class="btn btn-w-m btn-primary" onclick="imgFormCheck()">添加接口</button>                      </ul>                      </form>                    </li>                  </ul>                </div>              </div>            </div>          </div>        </div>    </div></div><li class="hidden newadd-li">  <div class="input-group create-w">      <span>key</span>    <input type="text" class="form-control newadd" name="more_title" maxlength="10" placeholder="添加key值" />    <span class="input-group-btn">      <button type="button" class="btn btn-outline btn-danger newadd-remove">删除</button>    </span>  </div>    <span>value</span>  <input type="text" placeholder="请输入vlaue值" maxlength="30" name="more_con" class="form-control input-lg newadd-con" /></li><li class="hidden mobile-hidden-li">  <span class="format-name"></span>  <span class="format-con"></span></li><!-- Mainly scripts --><script src="../../static/libs/jquery/jquery.min.js"></script><script src="../../static/libs/jquery.validate.min.js"></script><script src="../../static/libs/cropbox/cropbox.js"></script><script src="../../static/libs/inspinia/js/bootstrap.min.js"></script><script src="../../static/libs/inspinia/js/plugins/jeditable/jquery.jeditable.js"></script><!-- Data Tables --><script src="../../static/libs/inspinia/js/plugins/dataTables/jquery.dataTables.js"></script><script src="../../static/libs/inspinia/js/plugins/dataTables/dataTables.bootstrap.js"></script><script src="../../static/libs/inspinia/js/plugins/dataTables/dataTables.responsive.js"></script><script src="../../static/libs/inspinia/js/plugins/dataTables/dataTables.tableTools.min.js"></script><script src="../../static/libs/inspinia/js/plugins/metisMenu/jquery.metisMenu.js"></script><script src="../../static/libs/inspinia/js/plugins/slimscroll/jquery.slimscroll.min.js"></script><!-- Custom and plugin javascript --><script src="../../static/libs/inspinia/js/inspinia.js"></script><script src="../../static/libs/inspinia/js/plugins/pace/pace.min.js"></script><script src="../../static/js/template-bundle.js"></script><script src="../../static/js/tips-bomb.js"></script><script type="text/javascript">// function brandChange(){//   var options=$("#form-control-create option:selected");//   $('#phone-brand').html(options.text());// }// function removeWheelEvent (e) {//   e.stopPropagation();//   e.preventDefault();//   e.cancelBubble = false;//   return false;// }// function get_brand_list(){//   // 获取品牌//   $.ajax({//     url: COMPANY_HOST + "/api/hera/company/brand-list/",//     timeout : 5000,//     type: "GET",//     crossDomain: true,//     xhrFields: {//       withCredentials: true//     },//     success: function (data){//       switch (data.code){//         case ERRORCODE.SUCCESS://           var options_html = "<option value=''>请选择品牌</option>";//           if(data["brands"].length > 1){//             for (var i=0;i<data["brands"].length;i++){//               options_html += "<option value='" + data["brands"][i]["bid"] + "'>" + data["brands"][i]["name"] + "</option>";//             }//             options_html="<select class='form-control-create' name='brand_id' onchange='brandChange()'>"+options_html+"</select>";//             $('#phone-brand').html('请选择品牌');//           }else if(data["brands"].length = 1){//             options_html="<div class='sole-brands'>"+data["brands"][0]["name"]+"<input type='hidden' name='brand_id' value='" + data["brands"][0]["bid"] +"' /></div>";//             $('#phone-brand').html(data["brands"][0]["name"]);//           }//           $("#form-control-create").html(options_html);//           break;//         default://           //异常判断//           noticeMsg(data.msg_cn);//       }//     },//     error: function (jqXHR, textStatus, errorThrown) {//       networkErrorMsg();//     }//   });// }// function change_more_info(){//   $(".mobile-show-li").remove();//   var newadd=$('.newadd');//   var newaddcon=$('.newadd-con');//   for (var i=0; i<newadd.length; i++){//     if(newadd[i].value || newaddcon[i].value){//       var mobile_show_li = $(".mobile-hidden-li.hidden").clone();//       mobile_show_li.removeClass("hidden");//       mobile_show_li.addClass("mobile-show-li");//       mobile_show_li.find("span.format-name").text(newadd[i].value + "：");//       mobile_show_li.find("span.format-con").text(newaddcon[i].value);//       $(".format-ul").append(mobile_show_li);//     }//   }// }// function new_more_info(){//   var mobile_show_li = $(".mobile-hidden-li.hidden").clone();//   mobile_show_li.removeClass("hidden");//   mobile_show_li.addClass("mobile-show-li");//   mobile_show_li.find("span.format-name").text( "新增：");//   mobile_show_li.find("span.format-con").text("");//   $(".format-ul").append(mobile_show_li);// }// $(function (){//   // 判断公司和品牌状态//   audit_status_tips(msg="创建商品");//   // 获取品牌列表(有审核过的品牌才请求)//   var audit_data = get_audit_status();//   if(audit_data["brand_status"] == 5){//     get_brand_list();//   }//   // 判断公司和品牌状态//   // create_product_audit_status_tips();//   // 表单变化引起左边栏手机内容展示变化//   $('.create-inp').keyup(function (event){//     $('#phone-product-name').html($('#product-name').val());//     var product_name_len = $('#product-name').val().length;//     $('#product-name-num').html(product_name_len + "/30");//     $('#phone-product-bar').html($('#product-bar').val());//     var product_bar_len = $('#product-bar').val().length;//     $('#product-bar-num').html(product_bar_len + "/13");//     $('#phone-product-place').html($('#product-place').val());//     $('#phone-product-format').html($('#product-format').val());//     if($('#product-name').val()==''){//       $('#phone-product-name').html('商品名称');//     }//   });//   brandChange();//   deal_cropper();//   //阻止滚动条滚动//   $('div.upload-product-box').get(0).addEventListener('mousewheel', removeWheelEvent, false);  // more-info  $(".newadd-button").click(function(){    var newadd_li = $(".newadd-li.hidden").clone();    newadd_li.removeClass("hidden");    $(this).before(newadd_li);    new_more_info();  });  //判断浏览器是不是ie，后续要把这个函数添加到main.js中function isIE() { //ie?  if (!!window.ActiveXObject || "ActiveXObject" in window)    return true;  else    return false;}  $("body").on("click", ".newadd-remove", function() {    if(isIE()){      $(this).parents("li")[0].removeNode(true);    }else{      $(this).parents("li")[0].remove();    };    change_more_info();  });  $("body").on("change", ".newadd", function() {    change_more_info();  });  $("body").on("change", ".newadd-con", function() {    change_more_info();  });//   function submit_create_form() {//     var more_info = {};//     var formData = new FormData($('#create-form')[0]);//     var newadd=$('.newadd');//     var newaddcon=$('.newadd-con');//     for (var i=0; i<newadd.length; i++){//       if(newadd[i].value && newaddcon[i].value){//         more_info[newadd[i].value]=newaddcon[i].value;//       }//     }//     formData.delete('upload_file');//     formData.append('more_info', JSON.stringify(more_info));//     formData.append('picture', cropper.getBlob(), 'blob.png');//     //formData.delete()不兼容ie;//     $.ajax({//       url: PRODUCT_HOST + "/api/code/product/product-add/",//       timeout : 5000,//       type: "POST",//       async: false,  //创建商品需要同步等待创建结果//       crossDomain: true,//       xhrFields: {//         withCredentials: true//       },//       processData: false,//       contentType: false,//       data: formData,//       context: $("#create-form"),//       success: function (data){//         switch (data.code){//           case ERRORCODE.SUCCESS://             window.location.href = "/pages/product/product-list.html";//             break;//           default://             noticeMsg(data.msg_cn);//         }//       },//       error: function (jqXHR, textStatus, errorThrown) {//         networkErrorMsg();//       }//     });//   }//   //表单校验//   $("#create-form").validate({//     ignore: "",//     rules: {//       brand_id: {//         required: true//       },//       name: {//         required: true,//         maxlength: 30//       },//       bar_code: {//         required: true,//         minlength: 13,//         maxlength: 13//       },//       address: {//         required: true,//         maxlength: 30//       },//       specification: {//         required: true,//         maxlength: 20//       },//       upload_file:{//         required: true,//         checkSize:2//       }//     },//     messages: {//       brand_id: {//         required: '请选择品牌'//       },//       name: {//         required: '请输入不超过30个字的商品名称',//         maxlength: '请输入不超过30个字的商品名称'//       },//       bar_code: {//         required: '请输入13位标准商品条形码编号',//         maxlength: '请输入13位标准商品条形码编号',//         minlength: '请输入13位标准商品条形码编号'//       },//       address: {//         required: '请输入不超过30个字的商品生产地址',//         maxlength: '请输入不超过30个字的商品生产地址'//       },//       specification: {//         required: '请输入不超过20个字的商品的规格',//         maxlength: '请输入不超过20个字的商品的规格'//       },//       upload_file:{//         required: "请上传大小不超过2M的图片",//         checkSize:"请上传大小不超过2M的图片"//       }//     },//     errorPlacement: jquery_valid_errorPlacement,//     success: jquery_valid_success,//     highlight: jquery_valid_highlight,//     onfocusout: jquery_valid_onfocusout,//     invalidHandler: jquery_valid_invalidHandler,//     onkeyup: false,//     focusInvalid: true,//     errorElement: 'span',//     submitHandler: function(form) {//       tipsBombObj = {//         tipsKinds: '创建商品',         // 提示框类型//         tipsText: '创建商品需人工审核，是否继续？', //提示框文案//         btnLeftUrl: 'javascript:;',   // 左按钮跳转链接//         btnLeftFunction: closeDialog,          // 左按钮触发函数//         btnLeftText: '取消',          // 左按钮文案//         btnRightUrl: 'javascript:;',  // 右按钮跳转链接//         btnRightFunction: submit_create_form,         // 右按钮触发函数//         btnRightText: '提交审核',         // 右按钮文案//         btnState: '',                 //非居中btn状态//         closePageText: ''             //倒计时时长//       };//       tipsBombSmall(tipsBombObj);//     }//   });// });</script></body></html>